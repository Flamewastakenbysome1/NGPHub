<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>File Converter ‚Äî NGP Hub</title>

<meta property="og:title" content="NGP Hub ‚Äî File Converter" />
<meta property="og:description" content="Convert between tons of file formats. All processing happens in your browser." />
<meta property="og:image" content="https://ngphub.com/assets/ngp-logo.png" />
<meta property="og:url" content="https://ngphub.com/converter" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="NGP Hub" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="NGP Hub ‚Äî File Converter" />
<meta name="twitter:description" content="Convert between tons of file formats." />
<meta name="twitter:image" content="https://ngphub.com/assets/ngp-logo.png" />

<meta name="description" content="Convert between tons of file formats. All processing happens in your browser." />
<meta name="keywords" content="file converter, YouTube downloader, format converter, NGP tools" />

<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet" />
<link rel="icon" href="/assets/ngp-logo.png" type="image/png">

<style>
  :root{
    --bg:#0e0e11; --card:#15151b; --ink:#ececf1; --muted:#b5b7c3;
    --brandA:#6a11cb; --brandB:#2575fc; --line:#3a66ff;
    --ring:0 0 0 .2rem rgba(37,117,252,.35);
    --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:linear-gradient(180deg,#0b0b0e,#121219 60%,#0d0d14);
    color:var(--ink);
    font-family:'Rubik',system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
    -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    scroll-behavior:smooth;
  }
  .wrap{max-width:1024px; margin:0 auto; padding:0 16px}

  header{
    position:sticky; top:0; z-index:50; backdrop-filter:saturate(140%) blur(10px);
    background:rgba(10,10,14,.6); border-bottom:1px solid rgba(255,255,255,.06);
  }
  .bar{display:flex; align-items:center; justify-content:space-between; padding:12px 0}
  .logo{display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--ink)}
  .logo-img{width:28px; height:28px; border-radius:10px; object-fit:contain; box-shadow:var(--shadow)}
  .logo h1{font-size:1.05rem; margin:0; letter-spacing:.3px}
  nav{display:flex; align-items:center; gap:6px; flex-wrap:wrap}
  nav a{
    color:var(--ink); text-decoration:none; font-weight:500; margin-left:0;
    padding:8px 10px; border-radius:10px; opacity:.9
  }
  nav a:hover, nav a:focus-visible{background:rgba(255,255,255,.06); outline:none; box-shadow:var(--ring)}

  .modal{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.8); backdrop-filter:blur(5px); z-index:1000; align-items:center; justify-content:center}
  .modal.active{display:flex}
  .modal-content{background:var(--card); border-radius:var(--radius); max-width:450px; width:90%; box-shadow:0 20px 60px rgba(0,0,0,.5); border:1px solid rgba(255,255,255,.1); animation:modalSlideIn 0.3s ease-out}
  @keyframes modalSlideIn{from{transform:translateY(-50px); opacity:0} to{transform:translateY(0); opacity:1}}
  .modal-header{padding:20px 24px; border-bottom:1px solid rgba(255,255,255,.06)}
  .modal-header h3{margin:0; font-size:1.2rem}
  .modal-body{padding:24px; line-height:1.6}
  .modal-body p{margin:0}
  .modal-footer{padding:16px 24px; border-top:1px solid rgba(255,255,255,.06); display:flex; gap:12px; justify-content:flex-end}
  .btn{display:inline-block; text-decoration:none; color:white; font-weight:700; letter-spacing:.2px; padding:10px 14px; border-radius:12px; background:linear-gradient(120deg,var(--brandA),var(--brandB)); border:none; cursor:pointer; font-size:.95rem}
  .btn-ghost{background:rgba(255,255,255,.05); color:var(--ink); border:1px solid rgba(255,255,255,.1); padding:10px 20px; border-radius:10px; font-weight:600; cursor:pointer; font-size:.95rem}

  footer{border-top:1px solid rgba(255,255,255,.08); color:var(--muted); padding:24px 0 36px; text-align:center}

  /* Custom styles */
  main{padding:60px 0 80px; min-height:calc(100vh - 200px)}
  .hero{text-align:center; margin-bottom:48px}
  .hero h2{font-size:2.5rem; margin:0 0 12px; background:linear-gradient(120deg,var(--brandA),var(--brandB)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text}
  .hero p{color:var(--muted); font-size:1.1rem; margin:0}

  .tabs{display:flex; gap:12px; justify-content:center; margin-bottom:32px; flex-wrap:wrap}
  .tab{padding:12px 24px; border-radius:12px; background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.1); color:var(--ink); font-weight:600; cursor:pointer; transition:all .2s}
  .tab:hover{background:rgba(255,255,255,.08)}
  .tab.active{background:linear-gradient(120deg,var(--brandA),var(--brandB)); border-color:transparent}

  .tab-content{display:none}
  .tab-content.active{display:block}

  .card{background:var(--card); border-radius:var(--radius); padding:32px; border:1px solid rgba(255,255,255,.06); box-shadow:var(--shadow)}
  
  .upload-zone{
    border:2px dashed rgba(255,255,255,.15); border-radius:var(--radius); padding:48px 24px;
    text-align:center; cursor:pointer; transition:all .3s; margin-bottom:24px
  }
  .upload-zone:hover{border-color:var(--brandB); background:rgba(37,117,252,.05)}
  .upload-zone.drag-over{border-color:var(--brandA); background:rgba(106,17,203,.1)}
  .upload-icon{font-size:3rem; margin-bottom:12px; opacity:.6}
  .upload-text{font-size:1.1rem; color:var(--muted); margin-bottom:8px}
  .upload-hint{font-size:.9rem; color:var(--muted); opacity:.7}

  .file-input{display:none}

  .format-select{display:flex; gap:12px; margin-bottom:24px; align-items:center; flex-wrap:wrap}
  .format-select label{color:var(--muted); font-weight:600}
  .format-select select{
    background:var(--card); border:1px solid rgba(255,255,255,.15);
    color:var(--ink); padding:10px 16px; border-radius:10px; font-size:.95rem;
    cursor:pointer; flex:1; min-width:200px
  }
  .format-select select:focus{outline:none; box-shadow:var(--ring)}
  .format-select select option{
    background:var(--card); color:var(--ink); padding:8px
  }

  .convert-btn{
    width:100%; padding:14px; border-radius:12px; background:linear-gradient(120deg,var(--brandA),var(--brandB));
    color:white; font-weight:700; font-size:1.05rem; border:none; cursor:pointer;
    transition:transform .2s, box-shadow .2s; margin-bottom:24px
  }
  .convert-btn:hover{transform:translateY(-2px); box-shadow:0 8px 20px rgba(37,117,252,.4)}
  .convert-btn:disabled{opacity:.5; cursor:not-allowed; transform:none}

  .progress-bar{
    height:8px; background:rgba(255,255,255,.1); border-radius:4px; overflow:hidden;
    margin-bottom:16px; display:none
  }
  .progress-fill{
    height:100%; background:linear-gradient(90deg,var(--brandA),var(--brandB));
    width:0%; transition:width .3s
  }

  .status{
    text-align:center; padding:16px; border-radius:10px; margin-bottom:16px;
    display:none; font-weight:600
  }
  .status.info{background:rgba(37,117,252,.15); color:#5eb3ff; border:1px solid rgba(37,117,252,.3)}
  .status.success{background:rgba(40,199,111,.15); color:#5fffb0; border:1px solid rgba(40,199,111,.3)}
  .status.error{background:rgba(235,87,87,.15); color:#ff6b6b; border:1px solid rgba(235,87,87,.3)}

  .file-info{
    background:rgba(255,255,255,.03); border-radius:10px; padding:16px; margin-bottom:16px;
    border:1px solid rgba(255,255,255,.06); display:none
  }
  .file-info-item{display:flex; justify-content:space-between; margin-bottom:8px}
  .file-info-item:last-child{margin-bottom:0}
  .file-info-label{color:var(--muted); font-size:.9rem}
  .file-info-value{color:var(--ink); font-weight:600}

  .download-btn{
    width:100%; padding:14px; border-radius:12px; background:rgba(40,199,111,.2);
    border:1px solid rgba(40,199,111,.4); color:#5fffb0; font-weight:700;
    cursor:pointer; display:none; font-size:1.05rem
  }
  .download-btn:hover{background:rgba(40,199,111,.3)}

  .preview-section{
    background:rgba(255,255,255,.02); border-radius:var(--radius); padding:24px;
    border:1px solid rgba(255,255,255,.06); margin-bottom:24px; display:none
  }
  .preview-header{margin-bottom:16px}
  .preview-header h3{margin:0; font-size:1.1rem; color:var(--ink)}
  .preview-container{
    background:rgba(0,0,0,.3); border-radius:12px; padding:20px;
    display:flex; align-items:center; justify-content:center;
    min-height:300px; margin-bottom:24px; overflow:hidden
  }
  #preview-canvas{
    max-width:100%; max-height:500px; border-radius:8px;
    box-shadow:0 4px 20px rgba(0,0,0,.3)
  }
  #preview-img, #preview-video, #preview-audio{
    max-width:100%; max-height:500px; border-radius:8px
  }
  #preview-video, #preview-audio{width:100%}

  #preview-placeholder{
    display:none; font-size:1rem; padding:40px 20px
  }

  .editor-controls{
    background:rgba(255,255,255,.03); border-radius:10px; padding:20px;
    border:1px solid rgba(255,255,255,.06)
  }
  .control-group{
    display:flex; align-items:center; gap:12px; margin-bottom:16px;
    flex-wrap:wrap
  }
  .control-group:last-child{margin-bottom:0}
  .control-group label{
    color:var(--muted); font-weight:600; min-width:120px; font-size:.9rem
  }
  .control-group select{
    flex:1; min-width:200px; background:var(--card); border:1px solid rgba(255,255,255,.15);
    color:var(--ink); padding:8px 12px; border-radius:8px; font-size:.9rem;
    cursor:pointer
  }
  .control-group select:focus{outline:none; box-shadow:var(--ring)}
  .control-group select option{background:var(--card); color:var(--ink)}
  .control-group input[type="range"]{
    flex:1; min-width:200px; height:6px; border-radius:3px;
    background:rgba(255,255,255,.1); outline:none;
    -webkit-appearance:none; appearance:none
  }
  .control-group input[type="range"]::-webkit-slider-thumb{
    -webkit-appearance:none; appearance:none; width:16px; height:16px;
    border-radius:50%; background:linear-gradient(120deg,var(--brandA),var(--brandB));
    cursor:pointer; box-shadow:0 2px 8px rgba(37,117,252,.4)
  }
  .control-group input[type="range"]::-moz-range-thumb{
    width:16px; height:16px; border-radius:50%;
    background:linear-gradient(120deg,var(--brandA),var(--brandB));
    cursor:pointer; border:none; box-shadow:0 2px 8px rgba(37,117,252,.4)
  }
  .control-group input[type="range"]::-webkit-slider-thumb:hover{
    transform:scale(1.1); box-shadow:0 3px 12px rgba(37,117,252,.6)
  }
  .control-group input[type="range"]::-moz-range-thumb:hover{
    transform:scale(1.1); box-shadow:0 3px 12px rgba(37,117,252,.6)
  }
  .control-group span{
    color:var(--ink); font-weight:600; min-width:60px; text-align:right;
    font-size:.9rem
  }
  .checkbox-label{
    display:flex; align-items:center; gap:8px; cursor:pointer; min-width:auto !important
  }
  .checkbox-label input[type="checkbox"]{
    width:18px; height:18px; cursor:pointer; accent-color:var(--brandB)
  }
  .reset-btn{
    margin-top:8px; padding:10px 20px; border-radius:10px;
    background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.1);
    color:var(--ink); font-weight:600; cursor:pointer; font-size:.9rem;
    transition:all .2s
  }
  .reset-btn:hover{
    background:rgba(255,255,255,.08); border-color:rgba(255,255,255,.15)
  }

  @media (max-width: 768px) {
    .hero h2{font-size:2rem}
    .control-group{flex-direction:column; align-items:flex-start}
    .control-group label{min-width:auto}
    .control-group input[type="range"]{width:100%; min-width:auto}
    .control-group span{min-width:auto}
  }

  @media (prefers-reduced-motion: reduce){*{transition:none !important; animation:none !important}}
</style>
</head>
<body>

<header>
  <div class="wrap bar">
    <a class="logo" href="/">
      <img src="/assets/ngp-logo.png" alt="NGP Logo" class="logo-img" />
      <h1>NGP</h1>
    </a>
    <nav aria-label="Primary">
      <a href="/tools">Tools</a>
      <a href="/discordservers/">Servers</a>
      <a href="/projects">Projects</a>
      <a href="/docs/">Docs</a>
      <a href="/roblox">Roblox</a>
      <a href="/contact">Contact</a>
      <a href="/login" id="auth-link">Login</a>
    </nav>
  </div>
</header>

<main>
  <div class="wrap">
    <div class="hero">
      <h2>File Converter</h2>
      <p>Convert between tons of formats ‚Äî all in your browser</p>
    </div>

    <div class="tabs" style="display:none">
      <div class="tab active" data-tab="file-converter">üìÅ File Converter</div>
    </div>

    <!-- File Converter Tab -->
    <div class="tab-content active" id="file-converter">
      <div class="card">
        <div class="upload-zone" id="upload-zone">
          <div class="upload-icon">üì§</div>
          <div class="upload-text">Drop a file here or click to browse</div>
          <div class="upload-hint">Supports images, videos, audio, documents, and more</div>
          <input type="file" id="file-input" class="file-input" />
        </div>

        <div class="file-info" id="file-info">
          <div class="file-info-item">
            <span class="file-info-label">File Name:</span>
            <span class="file-info-value" id="file-name">-</span>
          </div>
          <div class="file-info-item">
            <span class="file-info-label">File Type:</span>
            <span class="file-info-value" id="file-type">-</span>
          </div>
          <div class="file-info-item">
            <span class="file-info-label">File Size:</span>
            <span class="file-info-value" id="file-size">-</span>
          </div>
        </div>

        <div class="preview-section" id="preview-section">
          <div class="preview-header">
            <h3>Output Preview</h3>
            <p style="font-size:.85rem; color:var(--muted); margin:8px 0 0 0">Preview of converted file with your edits</p>
          </div>
          <div class="preview-container" id="preview-container">
            <canvas id="preview-canvas"></canvas>
            <img id="preview-img" style="display:none" />
            <video id="preview-video" controls style="display:none"></video>
            <audio id="preview-audio" controls style="display:none"></audio>
            <div id="preview-placeholder" style="color:var(--muted); text-align:center">
              Select an output format to see preview
            </div>
          </div>
          
          <!-- Image Editor Controls -->
          <div class="editor-controls" id="image-editor">
            <div class="control-group">
              <label>Brightness</label>
              <input type="range" id="brightness" min="0" max="200" value="100" />
              <span id="brightness-val">100%</span>
            </div>
            <div class="control-group">
              <label>Contrast</label>
              <input type="range" id="contrast" min="0" max="200" value="100" />
              <span id="contrast-val">100%</span>
            </div>
            <div class="control-group">
              <label>Saturation</label>
              <input type="range" id="saturation" min="0" max="200" value="100" />
              <span id="saturation-val">100%</span>
            </div>
            <div class="control-group">
              <label>Blur</label>
              <input type="range" id="blur" min="0" max="20" value="0" />
              <span id="blur-val">0px</span>
            </div>
            <div class="control-group">
              <label>Rotation</label>
              <input type="range" id="rotation" min="0" max="360" value="0" step="15" />
              <span id="rotation-val">0¬∞</span>
            </div>
            <button class="reset-btn" id="reset-filters">Reset All</button>
          </div>

          <!-- GIF Editor Controls -->
          <div class="editor-controls" id="gif-editor" style="display:none">
            <div class="control-group">
              <label>Dithering</label>
              <select id="gif-dither">
                <option value="none">None (Faster)</option>
                <option value="floyd" selected>Floyd-Steinberg (Better Quality)</option>
                <option value="ordered">Ordered Dither</option>
              </select>
            </div>
            <div class="control-group">
              <label>Colors</label>
              <input type="range" id="gif-colors" min="2" max="256" value="256" step="2" />
              <span id="gif-colors-val">256</span>
            </div>
            <div class="control-group">
              <label>Quality</label>
              <input type="range" id="gif-quality" min="1" max="100" value="80" />
              <span id="gif-quality-val">80%</span>
            </div>
            <div class="control-group">
              <label>Scale</label>
              <input type="range" id="gif-scale" min="10" max="200" value="100" />
              <span id="gif-scale-val">100%</span>
            </div>
          </div>

          <!-- Video Editor Controls -->
          <div class="editor-controls" id="video-editor" style="display:none">
            <div class="control-group">
              <label>Quality</label>
              <input type="range" id="video-quality" min="1" max="100" value="90" />
              <span id="video-quality-val">90%</span>
            </div>
            <div class="control-group">
              <label>Resolution Scale</label>
              <input type="range" id="video-scale" min="25" max="100" value="100" />
              <span id="video-scale-val">100%</span>
            </div>
          </div>
        </div>

        <div class="format-select" id="format-select-container" style="display:none">
          <label>Convert to:</label>
          <select id="output-format">
            <option value="">Select format...</option>
          </select>
        </div>

        <div class="progress-bar" id="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>

        <div class="status" id="status"></div>

        <button class="convert-btn" id="convert-btn" disabled>Select a file to convert</button>
        <button class="download-btn" id="download-btn">Download Converted File</button>
      </div>
    </div>
</main>

<footer>
  <div class="wrap">
    <small>¬© <span id="year"></span> NGP ‚Äî Alpha.</small>
  </div>
</footer>

<div id="logout-modal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Logout from NGP Hub?</h3>
    </div>
    <div class="modal-body">
      <p>Are you sure you want to logout?</p>
    </div>
    <div class="modal-footer">
      <button class="btn-ghost" id="cancel-logout-btn">Cancel</button>
      <button class="btn" id="confirm-logout-btn">Logout</button>
    </div>
  </div>
</div>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();
</script>

<script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
  import { getAuth, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

  const firebaseConfig = {
    apiKey: "AIzaSyASMd5kEAscaERvWAT6rYmZSahP2NFW0E0",
    authDomain: "ngp-hub.firebaseapp.com",
    projectId: "ngp-hub",
    storageBucket: "ngp-hub.firebasestorage.app",
    messagingSenderId: "157947384705",
    appId: "1:157947384705:web:c89e95d6d9f7436bb5ce80"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const authLink = document.getElementById('auth-link');
  const logoutModal = document.getElementById('logout-modal');
  const confirmLogoutBtn = document.getElementById('confirm-logout-btn');
  const cancelLogoutBtn = document.getElementById('cancel-logout-btn');

  onAuthStateChanged(auth, (user) => {
    if (user) {
      authLink.textContent = user.email.split('@')[0];
      authLink.href = '#';
      authLink.addEventListener('click', (e) => {
        e.preventDefault();
        logoutModal.classList.add('active');
      });
    } else {
      authLink.textContent = 'Login';
      authLink.href = '/login';
    }
  });

  cancelLogoutBtn.addEventListener('click', () => {
    logoutModal.classList.remove('active');
  });

  confirmLogoutBtn.addEventListener('click', async () => {
    await signOut(auth);
    window.location.reload();
  });
</script>

<script>
  // Conversion format mappings - MASSIVE list!
  const formatMap = {
    // Images
    'png': ['jpg', 'jpeg', 'webp', 'gif', 'bmp', 'ico', 'svg', 'tiff', 'avif'],
    'jpg': ['png', 'webp', 'gif', 'bmp', 'ico', 'svg', 'tiff', 'avif'],
    'jpeg': ['png', 'webp', 'gif', 'bmp', 'ico', 'svg', 'tiff', 'avif'],
    'webp': ['png', 'jpg', 'jpeg', 'gif', 'bmp', 'svg', 'avif'],
    'gif': ['png', 'jpg', 'jpeg', 'webp', 'mp4', 'webm'],
    'bmp': ['png', 'jpg', 'jpeg', 'webp'],
    'svg': ['png', 'jpg', 'jpeg', 'pdf'],
    'ico': ['png', 'jpg', 'jpeg'],
    'tiff': ['png', 'jpg', 'jpeg', 'webp'],
    'avif': ['png', 'jpg', 'jpeg', 'webp'],
    
    // Videos
    'mp4': ['webm', 'avi', 'mov', 'mkv', 'flv', 'wmv', 'gif', 'mp3', 'wav'],
    'webm': ['mp4', 'avi', 'mov', 'mkv', 'gif', 'mp3', 'wav'],
    'avi': ['mp4', 'webm', 'mov', 'mkv', 'gif'],
    'mov': ['mp4', 'webm', 'avi', 'mkv', 'gif'],
    'mkv': ['mp4', 'webm', 'avi', 'mov'],
    'flv': ['mp4', 'webm', 'avi'],
    'wmv': ['mp4', 'webm', 'avi'],
    
    // Audio
    'mp3': ['wav', 'ogg', 'aac', 'flac', 'm4a', 'wma'],
    'wav': ['mp3', 'ogg', 'aac', 'flac', 'm4a'],
    'ogg': ['mp3', 'wav', 'aac', 'flac'],
    'aac': ['mp3', 'wav', 'ogg', 'flac'],
    'flac': ['mp3', 'wav', 'ogg', 'aac'],
    'm4a': ['mp3', 'wav', 'ogg', 'aac'],
    'wma': ['mp3', 'wav', 'ogg'],
    
    // Documents
    'pdf': ['docx', 'txt', 'html', 'png', 'jpg'],
    'docx': ['pdf', 'txt', 'html', 'odt', 'rtf'],
    'doc': ['pdf', 'docx', 'txt', 'html', 'rtf'],
    'txt': ['pdf', 'docx', 'html', 'md', 'rtf'],
    'html': ['pdf', 'docx', 'txt', 'md'],
    'md': ['html', 'pdf', 'docx', 'txt'],
    'rtf': ['pdf', 'docx', 'txt', 'html'],
    'odt': ['pdf', 'docx', 'txt', 'html'],
    'xlsx': ['csv', 'xls', 'pdf', 'html'],
    'xls': ['xlsx', 'csv', 'pdf', 'html'],
    'csv': ['xlsx', 'xls', 'json', 'txt'],
    'pptx': ['pdf', 'ppt', 'html'],
    'ppt': ['pdf', 'pptx', 'html'],
    
    // Code/Data
    'json': ['csv', 'xml', 'yaml', 'txt'],
    'xml': ['json', 'csv', 'yaml', 'txt'],
    'yaml': ['json', 'xml', 'txt'],
    'yml': ['json', 'xml', 'txt'],
    
    // Archives
    'zip': ['tar', 'gz', '7z', 'rar'],
    'tar': ['zip', 'gz', '7z'],
    'gz': ['zip', 'tar', '7z'],
    '7z': ['zip', 'tar', 'gz'],
    'rar': ['zip', 'tar', '7z']
  };

  // Tab switching
  const tabs = document.querySelectorAll('.tab');
  const tabContents = document.querySelectorAll('.tab-content');
  
  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      const targetTab = tab.dataset.tab;
      
      tabs.forEach(t => t.classList.remove('active'));
      tabContents.forEach(tc => tc.classList.remove('active'));
      
      tab.classList.add('active');
      document.getElementById(targetTab).classList.add('active');
    });
  });

  // File Converter Logic
  const uploadZone = document.getElementById('upload-zone');
  const fileInput = document.getElementById('file-input');
  const fileInfo = document.getElementById('file-info');
  const formatSelectContainer = document.getElementById('format-select-container');
  const outputFormat = document.getElementById('output-format');
  const convertBtn = document.getElementById('convert-btn');
  const downloadBtn = document.getElementById('download-btn');
  const progressBar = document.getElementById('progress-bar');
  const progressFill = document.getElementById('progress-fill');
  const status = document.getElementById('status');
  
  // Preview and editor elements
  const previewSection = document.getElementById('preview-section');
  const previewCanvas = document.getElementById('preview-canvas');
  const previewImg = document.getElementById('preview-img');
  const previewVideo = document.getElementById('preview-video');
  const previewAudio = document.getElementById('preview-audio');
  const previewPlaceholder = document.getElementById('preview-placeholder');
  const imageEditor = document.getElementById('image-editor');
  const gifEditor = document.getElementById('gif-editor');
  const videoEditor = document.getElementById('video-editor');
  
  // Filter controls
  const brightnessSlider = document.getElementById('brightness');
  const contrastSlider = document.getElementById('contrast');
  const saturationSlider = document.getElementById('saturation');
  const blurSlider = document.getElementById('blur');
  const rotationSlider = document.getElementById('rotation');
  const resetFiltersBtn = document.getElementById('reset-filters');
  
  let selectedFile = null;
  let convertedBlob = null;
  let originalImage = null;
  let ctx = null;
  let currentOutputFormat = null;
  let currentFilters = {
    brightness: 100,
    contrast: 100,
    saturation: 100,
    blur: 0,
    rotation: 0
  };

  uploadZone.addEventListener('click', () => fileInput.click());
  
  uploadZone.addEventListener('dragover', (e) => {
    e.preventDefault();
    uploadZone.classList.add('drag-over');
  });
  
  uploadZone.addEventListener('dragleave', () => {
    uploadZone.classList.remove('drag-over');
  });
  
  uploadZone.addEventListener('drop', (e) => {
    e.preventDefault();
    uploadZone.classList.remove('drag-over');
    const files = e.dataTransfer.files;
    if (files.length > 0) {
      handleFile(files[0]);
    }
  });
  
  fileInput.addEventListener('change', (e) => {
    if (e.target.files.length > 0) {
      handleFile(e.target.files[0]);
    }
  });

  function handleFile(file) {
    selectedFile = file;
    const ext = file.name.split('.').pop().toLowerCase();
    
    // Display file info
    document.getElementById('file-name').textContent = file.name;
    document.getElementById('file-type').textContent = ext.toUpperCase();
    document.getElementById('file-size').textContent = formatBytes(file.size);
    fileInfo.style.display = 'block';
    
    // Show preview section
    previewSection.style.display = 'block';
    previewPlaceholder.style.display = 'block';
    previewCanvas.style.display = 'none';
    previewImg.style.display = 'none';
    previewVideo.style.display = 'none';
    previewAudio.style.display = 'none';
    
    // Hide all editors
    imageEditor.style.display = 'none';
    gifEditor.style.display = 'none';
    videoEditor.style.display = 'none';
    
    // Load original image for ALL image formats including GIF
    const imageFormats = ['png', 'jpg', 'jpeg', 'webp', 'bmp', 'ico', 'tiff', 'avif', 'gif'];
    if (imageFormats.includes(ext)) {
      const reader = new FileReader();
      reader.onload = (e) => {
        const img = new Image();
        img.onload = () => {
          originalImage = img;
          console.log('Image loaded:', img.width, 'x', img.height);
        };
        img.onerror = () => {
          console.error('Failed to load image');
        };
        img.src = e.target.result;
      };
      reader.readAsDataURL(file);
    }
    
    // Populate format options
    const formats = formatMap[ext] || [];
    outputFormat.innerHTML = '<option value="">Select format...</option>';
    
    if (formats.length > 0) {
      formats.forEach(format => {
        const option = document.createElement('option');
        option.value = format;
        option.textContent = format.toUpperCase();
        outputFormat.appendChild(option);
      });
      formatSelectContainer.style.display = 'flex';
      convertBtn.disabled = true;
      convertBtn.textContent = 'Select an output format';
    } else {
      formatSelectContainer.style.display = 'none';
      showStatus('error', `Sorry, no conversions available for .${ext} files yet!`);
      convertBtn.disabled = true;
      convertBtn.textContent = 'No conversions available';
    }
    
    downloadBtn.style.display = 'none';
  }

  outputFormat.addEventListener('change', () => {
    if (outputFormat.value) {
      currentOutputFormat = outputFormat.value;
      convertBtn.disabled = false;
      convertBtn.textContent = `Convert to ${outputFormat.value.toUpperCase()}`;
      
      console.log('Format selected:', currentOutputFormat);
      
      // Wait for image to load if it hasn't yet
      if (!originalImage) {
        console.log('Waiting for image to load...');
        setTimeout(() => {
          if (originalImage) {
            updateOutputPreview();
          } else {
            console.error('Image still not loaded after timeout');
          }
        }, 500);
      } else {
        updateOutputPreview();
      }
    } else {
      convertBtn.disabled = true;
      convertBtn.textContent = 'Select an output format';
      previewPlaceholder.style.display = 'block';
      previewCanvas.style.display = 'none';
      imageEditor.style.display = 'none';
      gifEditor.style.display = 'none';
    }
  });

  function updateOutputPreview() {
    console.log('updateOutputPreview called, format:', currentOutputFormat);
    
    if (!originalImage) {
      console.error('No original image loaded yet!');
      return;
    }
    
    if (!currentOutputFormat) {
      console.error('No output format selected!');
      return;
    }
    
    previewPlaceholder.style.display = 'none';
    
    const imageFormats = ['png', 'jpg', 'jpeg', 'webp', 'bmp', 'ico', 'tiff', 'avif'];
    
    // Show appropriate editor and render preview
    if (currentOutputFormat === 'gif') {
      console.log('Showing GIF editor');
      gifEditor.style.display = 'block';
      imageEditor.style.display = 'none';
      renderOutputPreview();
    } else if (imageFormats.includes(currentOutputFormat)) {
      console.log('Showing image editor');
      imageEditor.style.display = 'block';
      gifEditor.style.display = 'none';
      renderOutputPreview();
    } else {
      console.log('No special editor for this format');
      imageEditor.style.display = 'none';
      gifEditor.style.display = 'none';
      renderOutputPreview();
    }
  }

  function renderOutputPreview() {
    console.log('renderOutputPreview called');
    
    if (!originalImage) {
      console.error('No original image!');
      return;
    }
    
    previewCanvas.style.display = 'block';
    ctx = previewCanvas.getContext('2d');
    
    const angle = (currentFilters.rotation * Math.PI) / 180;
    const width = originalImage.width;
    const height = originalImage.height;
    
    console.log('Rendering image:', width, 'x', height);
    
    // Calculate new canvas size for rotation
    const sin = Math.abs(Math.sin(angle));
    const cos = Math.abs(Math.cos(angle));
    const newWidth = width * cos + height * sin;
    const newHeight = width * sin + height * cos;
    
    previewCanvas.width = newWidth;
    previewCanvas.height = newHeight;
    
    // Clear canvas
    ctx.clearRect(0, 0, newWidth, newHeight);
    
    // Apply filters
    ctx.filter = `
      brightness(${currentFilters.brightness}%)
      contrast(${currentFilters.contrast}%)
      saturate(${currentFilters.saturation}%)
      blur(${currentFilters.blur}px)
    `;
    
    // Rotate and draw
    ctx.save();
    ctx.translate(newWidth / 2, newHeight / 2);
    ctx.rotate(angle);
    ctx.drawImage(originalImage, -width / 2, -height / 2, width, height);
    ctx.restore();
    
    console.log('Image drawn to canvas');
    
    // Apply GIF color reduction if outputting to GIF
    if (currentOutputFormat === 'gif') {
      console.log('Applying GIF color reduction');
      applyGifColorReduction();
    }
  }

  function applyGifColorReduction() {
    if (!ctx) {
      console.error('No canvas context!');
      return;
    }
    
    const colorsInput = document.getElementById('gif-colors');
    const colors = colorsInput ? parseInt(colorsInput.value) : 256;
    
    console.log('Color reduction with', colors, 'colors');
    
    const imageData = ctx.getImageData(0, 0, previewCanvas.width, previewCanvas.height);
    const data = imageData.data;
    
    // Simple color quantization (reduce to fewer colors)
    const colorStep = Math.max(1, Math.floor(256 / Math.pow(colors, 1/3)));
    
    for (let i = 0; i < data.length; i += 4) {
      data[i] = Math.round(data[i] / colorStep) * colorStep;     // R
      data[i + 1] = Math.round(data[i + 1] / colorStep) * colorStep; // G
      data[i + 2] = Math.round(data[i + 2] / colorStep) * colorStep; // B
    }
    
    ctx.putImageData(imageData, 0, 0);
    console.log('GIF color reduction applied');
  }

  convertBtn.addEventListener('click', async () => {
    if (!selectedFile || !outputFormat.value) return;
    
    const inputExt = selectedFile.name.split('.').pop().toLowerCase();
    const outputExt = outputFormat.value;
    
    convertBtn.disabled = true;
    convertBtn.textContent = 'Converting...';
    progressBar.style.display = 'block';
    downloadBtn.style.display = 'none';
    
    // Simulate progress
    let progress = 0;
    const progressInterval = setInterval(() => {
      progress += Math.random() * 30;
      if (progress > 90) progress = 90;
      progressFill.style.width = progress + '%';
    }, 200);
    
    try {
      // This is where you'd do actual conversion
      // For images, we can do real conversions!
      const imageFormats = ['png', 'jpg', 'jpeg', 'webp', 'gif', 'bmp'];
      
      if (imageFormats.includes(inputExt) && imageFormats.includes(outputExt)) {
        convertedBlob = await convertImage(selectedFile, outputExt);
      } else {
        // For other formats, simulate conversion (you'd need ffmpeg.js or similar)
        await new Promise(resolve => setTimeout(resolve, 2000));
        convertedBlob = new Blob([selectedFile], { type: getMimeType(outputExt) });
      }
      
      clearInterval(progressInterval);
      progressFill.style.width = '100%';
      
      setTimeout(() => {
        progressBar.style.display = 'none';
        progressFill.style.width = '0%';
        showStatus('success', `‚úÖ Converted to ${outputExt.toUpperCase()} successfully!`);
        convertBtn.textContent = 'Convert Another File';
        convertBtn.disabled = false;
        downloadBtn.style.display = 'block';
      }, 500);
      
    } catch (error) {
      clearInterval(progressInterval);
      progressBar.style.display = 'none';
      progressFill.style.width = '0%';
      showStatus('error', `‚ùå Conversion failed: ${error.message}`);
      convertBtn.textContent = 'Try Again';
      convertBtn.disabled = false;
    }
  });

  downloadBtn.addEventListener('click', () => {
    if (!convertedBlob) return;
    
    const outputExt = outputFormat.value;
    const baseName = selectedFile.name.replace(/\.[^/.]+$/, '');
    const downloadLink = document.createElement('a');
    downloadLink.href = URL.createObjectURL(convertedBlob);
    downloadLink.download = `${baseName}.${outputExt}`;
    downloadLink.click();
    
    showStatus('success', 'üì• Download started!');
  });

  // Debounce function for real-time updates
  function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
      const later = () => {
        clearTimeout(timeout);
        func(...args);
      };
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }

  const debouncedRender = debounce(renderOutputPreview, 50);

  // Filter controls event listeners with immediate visual feedback
  brightnessSlider.addEventListener('input', (e) => {
    currentFilters.brightness = e.target.value;
    document.getElementById('brightness-val').textContent = e.target.value + '%';
    debouncedRender();
  });

  contrastSlider.addEventListener('input', (e) => {
    currentFilters.contrast = e.target.value;
    document.getElementById('contrast-val').textContent = e.target.value + '%';
    debouncedRender();
  });

  saturationSlider.addEventListener('input', (e) => {
    currentFilters.saturation = e.target.value;
    document.getElementById('saturation-val').textContent = e.target.value + '%';
    debouncedRender();
  });

  blurSlider.addEventListener('input', (e) => {
    currentFilters.blur = e.target.value;
    document.getElementById('blur-val').textContent = e.target.value + 'px';
    debouncedRender();
  });

  rotationSlider.addEventListener('input', (e) => {
    currentFilters.rotation = e.target.value;
    document.getElementById('rotation-val').textContent = e.target.value + '¬∞';
    debouncedRender();
  });

  resetFiltersBtn.addEventListener('click', () => {
    currentFilters = {
      brightness: 100,
      contrast: 100,
      saturation: 100,
      blur: 0,
      rotation: 0
    };
    brightnessSlider.value = 100;
    contrastSlider.value = 100;
    saturationSlider.value = 100;
    blurSlider.value = 0;
    rotationSlider.value = 0;
    document.getElementById('brightness-val').textContent = '100%';
    document.getElementById('contrast-val').textContent = '100%';
    document.getElementById('saturation-val').textContent = '100%';
    document.getElementById('blur-val').textContent = '0px';
    document.getElementById('rotation-val').textContent = '0¬∞';
    renderOutputPreview();
  });

  // GIF editor controls
  const gifColorsSlider = document.getElementById('gif-colors');
  if (gifColorsSlider) {
    gifColorsSlider.addEventListener('input', (e) => {
      document.getElementById('gif-colors-val').textContent = e.target.value;
      debouncedRender();
    });
  }

  const gifQualitySlider = document.getElementById('gif-quality');
  if (gifQualitySlider) {
    gifQualitySlider.addEventListener('input', (e) => {
      document.getElementById('gif-quality-val').textContent = e.target.value + '%';
    });
  }

  const gifScaleSlider = document.getElementById('gif-scale');
  if (gifScaleSlider) {
    gifScaleSlider.addEventListener('input', (e) => {
      document.getElementById('gif-scale-val').textContent = e.target.value + '%';
    });
  }

  // Video editor controls
  const videoQualitySlider = document.getElementById('video-quality');
  if (videoQualitySlider) {
    videoQualitySlider.addEventListener('input', (e) => {
      document.getElementById('video-quality-val').textContent = e.target.value + '%';
    });
  }

  const videoScaleSlider = document.getElementById('video-scale');
  if (videoScaleSlider) {
    videoScaleSlider.addEventListener('input', (e) => {
      document.getElementById('video-scale-val').textContent = e.target.value + '%';
    });
  }

  async function convertImage(file, format) {
    return new Promise((resolve, reject) => {
      // Use the edited canvas if available, otherwise load the original
      if (previewCanvas.style.display === 'block' && ctx) {
        previewCanvas.toBlob((blob) => {
          if (blob) {
            resolve(blob);
          } else {
            reject(new Error('Image conversion failed'));
          }
        }, getMimeType(format), 0.95);
      } else {
        const reader = new FileReader();
        reader.onload = (e) => {
          const img = new Image();
          img.onload = () => {
            const canvas = document.createElement('canvas');
            canvas.width = img.width;
            canvas.height = img.height;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0);
            
            canvas.toBlob((blob) => {
              if (blob) {
                resolve(blob);
              } else {
                reject(new Error('Image conversion failed'));
              }
            }, getMimeType(format), 0.95);
          };
          img.onerror = () => reject(new Error('Failed to load image'));
          img.src = e.target.result;
        };
        reader.onerror = () => reject(new Error('Failed to read file'));
        reader.readAsDataURL(file);
      }
    });
  }

  function getMimeType(ext) {
    const mimeTypes = {
      'png': 'image/png',
      'jpg': 'image/jpeg',
      'jpeg': 'image/jpeg',
      'webp': 'image/webp',
      'gif': 'image/gif',
      'bmp': 'image/bmp',
      'svg': 'image/svg+xml',
      'mp4': 'video/mp4',
      'webm': 'video/webm',
      'mp3': 'audio/mpeg',
      'wav': 'audio/wav',
      'pdf': 'application/pdf',
      'txt': 'text/plain',
      'html': 'text/html',
      'json': 'application/json',
      'xml': 'application/xml',
      'zip': 'application/zip'
    };
    return mimeTypes[ext] || 'application/octet-stream';
  }

  function formatBytes(bytes) {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
  }

  function showStatus(type, message) {
    status.className = `status ${type}`;
    status.textContent = message;
    status.style.display = 'block';
    
    setTimeout(() => {
      status.style.display = 'none';
    }, 5000);
  }
</script>

</body>
</html>
