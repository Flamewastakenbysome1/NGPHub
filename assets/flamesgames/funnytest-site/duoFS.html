<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Learn FlameScrpt ‚Äî NGP Hub</title>

<meta property="og:title" content="Learn FlameScrpt ‚Äî NGP Hub" />
<meta property="og:description" content="Master the secret language of Flame and Scrpt with interactive lessons" />
<meta property="og:image" content="https://ngphub.com/assets/ngp-logo.png" />
<meta property="og:url" content="https://ngphub.com" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="NGP Hub" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Learn FlameScrpt ‚Äî NGP Hub" />
<meta name="twitter:description" content="Master the secret language of Flame and Scrpt" />
<meta name="twitter:image" content="https://ngphub.com/assets/ngp-logo.png" />

<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet" />
<link rel="icon" href="/assets/ngp-logo.png" type="image/png">

<style>
  :root{
    --bg:#0e0e11; --card:#15151b; --ink:#ececf1; --muted:#b5b7c3;
    --brandA:#6a11cb; --brandB:#2575fc; --line:#3a66ff;
    --ring:0 0 0 .2rem rgba(37,117,252,.35);
    --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
    --success:#10b981; --error:#ef4444; --warning:#f59e0b;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:linear-gradient(180deg,#0b0b0e,#121219 60%,#0d0d14);
    color:var(--ink);
    font-family:'Rubik',system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
    -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    scroll-behavior:smooth;
  }
  .wrap{max-width:1024px; margin:0 auto; padding:0 16px}

  header{
    position:sticky; top:0; z-index:50; backdrop-filter:saturate(140%) blur(10px);
    background:rgba(10,10,14,.6); border-bottom:1px solid rgba(255,255,255,.06);
  }
  .bar{display:flex; align-items:center; justify-content:space-between; padding:12px 0}
  .logo{display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--ink)}
  .logo-img{width:28px; height:28px; border-radius:10px; object-fit:contain; box-shadow:var(--shadow)}
  .logo h1{font-size:1.05rem; margin:0; letter-spacing:.3px}
  nav{display:flex; align-items:center; gap:6px; flex-wrap:wrap}
  nav a{
    color:var(--ink); text-decoration:none; font-weight:500; margin-left:0;
    padding:8px 10px; border-radius:10px; opacity:.9
  }
  nav a:hover, nav a:focus-visible{background:rgba(255,255,255,.06); outline:none; box-shadow:var(--ring)}

  .modal{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.8); backdrop-filter:blur(5px); z-index:1000; align-items:center; justify-content:center}
  .modal.active{display:flex}
  .modal-content{background:var(--card); border-radius:var(--radius); max-width:450px; width:90%; box-shadow:0 20px 60px rgba(0,0,0,.5); border:1px solid rgba(255,255,255,.1); animation:modalSlideIn 0.3s ease-out}
  @keyframes modalSlideIn{from{transform:translateY(-50px); opacity:0} to{transform:translateY(0); opacity:1}}
  .modal-header{padding:20px 24px; border-bottom:1px solid rgba(255,255,255,.06)}
  .modal-header h3{margin:0; font-size:1.2rem}
  .modal-body{padding:24px; line-height:1.6}
  .modal-body p{margin:0}
  .modal-footer{padding:16px 24px; border-top:1px solid rgba(255,255,255,.06); display:flex; gap:12px; justify-content:flex-end}
  .btn{display:inline-block; text-decoration:none; color:white; font-weight:700; letter-spacing:.2px; padding:10px 14px; border-radius:12px; background:linear-gradient(120deg,var(--brandA),var(--brandB)); border:none; cursor:pointer; font-size:.95rem; transition:transform .2s, box-shadow .2s}
  .btn:hover{transform:translateY(-2px); box-shadow:0 8px 20px rgba(37,117,252,.4)}
  .btn:disabled{opacity:.5; cursor:not-allowed; transform:none}
  .btn-ghost{background:rgba(255,255,255,.05); color:var(--ink); border:1px solid rgba(255,255,255,.1); padding:10px 20px; border-radius:10px; font-weight:600; cursor:pointer; font-size:.95rem}
  .btn-secondary{background:rgba(255,255,255,.1); color:var(--ink); border:none}

  main{padding:40px 0 80px; min-height:calc(100vh - 200px)}
  
  .hero{text-align:center; padding:40px 0}
  .hero h2{font-size:2.5rem; margin:0 0 12px; background:linear-gradient(120deg,var(--brandA),var(--brandB)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text}
  .hero p{font-size:1.1rem; color:var(--muted); margin:0}

  .progress-section{margin:40px 0}
  .progress-card{background:var(--card); border-radius:var(--radius); padding:24px; border:1px solid rgba(255,255,255,.08); box-shadow:var(--shadow)}
  .progress-header{display:flex; justify-content:space-between; align-items:center; margin-bottom:20px}
  .progress-title{font-size:1.2rem; font-weight:700; margin:0}
  .progress-stats{display:flex; gap:24px; flex-wrap:wrap}
  .stat{text-align:center}
  .stat-value{font-size:2rem; font-weight:700; color:var(--brandB); margin:0}
  .stat-label{font-size:.85rem; color:var(--muted); margin:4px 0 0}
  
  .progress-bar-container{background:rgba(255,255,255,.05); border-radius:20px; height:12px; overflow:hidden; margin-top:16px}
  .progress-bar{height:100%; background:linear-gradient(90deg,var(--brandA),var(--brandB)); border-radius:20px; transition:width .5s ease}

  .lessons-grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:20px; margin:40px 0}
  .lesson-card{background:var(--card); border-radius:var(--radius); padding:24px; border:1px solid rgba(255,255,255,.08); cursor:pointer; transition:transform .2s, box-shadow .2s, border-color .2s}
  .lesson-card:hover{transform:translateY(-4px); box-shadow:var(--shadow); border-color:var(--brandB)}
  .lesson-card.locked{opacity:.5; cursor:not-allowed}
  .lesson-card.locked:hover{transform:none; box-shadow:none; border-color:rgba(255,255,255,.08)}
  .lesson-card.completed{border-color:var(--success)}
  .lesson-header{display:flex; justify-content:space-between; align-items:center; margin-bottom:12px}
  .lesson-number{font-size:.85rem; color:var(--muted); font-weight:600}
  .lesson-status{font-size:1.5rem}
  .lesson-title{font-size:1.2rem; font-weight:700; margin:0 0 8px}
  .lesson-desc{font-size:.9rem; color:var(--muted); margin:0}

  .quiz-container{background:var(--card); border-radius:var(--radius); padding:32px; border:1px solid rgba(255,255,255,.08); box-shadow:var(--shadow); max-width:700px; margin:0 auto}
  .quiz-header{text-align:center; margin-bottom:32px}
  .quiz-progress{font-size:.9rem; color:var(--muted); margin-bottom:8px}
  .quiz-question{font-size:1.5rem; font-weight:700; margin:0}
  .quiz-instruction{font-size:.95rem; color:var(--muted); margin:8px 0 0}
  
  .answer-input{width:100%; padding:16px; font-size:1.2rem; background:rgba(255,255,255,.05); border:2px solid rgba(255,255,255,.1); border-radius:12px; color:var(--ink); font-family:'Rubik',sans-serif; margin:24px 0}
  .answer-input:focus{outline:none; border-color:var(--brandB); box-shadow:var(--ring)}
  
  .options-grid{display:grid; gap:12px; margin:24px 0}
  .option-btn{width:100%; padding:16px; text-align:left; background:rgba(255,255,255,.05); border:2px solid rgba(255,255,255,.1); border-radius:12px; color:var(--ink); font-size:1.1rem; font-weight:500; cursor:pointer; transition:all .2s; font-family:'Rubik',sans-serif}
  .option-btn:hover{background:rgba(255,255,255,.1); border-color:var(--brandB)}
  .option-btn.selected{background:rgba(37,117,252,.2); border-color:var(--brandB)}
  .option-btn.correct{background:rgba(16,185,129,.2); border-color:var(--success)}
  .option-btn.incorrect{background:rgba(239,68,68,.2); border-color:var(--error)}
  
  .quiz-actions{display:flex; gap:12px; justify-content:center; margin-top:32px}
  
  .feedback{padding:20px; border-radius:12px; margin:24px 0; text-align:center; font-weight:600; font-size:1.1rem}
  .feedback.correct{background:rgba(16,185,129,.2); border:2px solid var(--success); color:var(--success)}
  .feedback.incorrect{background:rgba(239,68,68,.2); border:2px solid var(--error); color:var(--error)}

  .reference-card{background:rgba(255,255,255,.03); border-radius:12px; padding:20px; margin:24px 0; border:1px solid rgba(255,255,255,.08)}
  .reference-title{font-size:1.1rem; font-weight:700; margin:0 0 12px; color:var(--brandB)}
  .reference-grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(70px,1fr)); gap:8px; font-size:.8rem; max-height:200px; overflow-y:auto}
  .ref-item{background:rgba(255,255,255,.05); padding:6px 8px; border-radius:6px; text-align:center}
  .ref-item strong{color:var(--brandB); display:block; font-size:.9rem}
  .ref-item span{color:var(--muted); font-size:.75rem}

  .toggle-reference{background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.1); padding:8px 16px; border-radius:8px; cursor:pointer; font-size:.85rem; font-weight:600; margin:16px 0; display:inline-block; transition:all .2s}
  .toggle-reference:hover{background:rgba(255,255,255,.12)}

  footer{border-top:1px solid rgba(255,255,255,.08); color:var(--muted); padding:24px 0 36px; text-align:center}

  .hidden{display:none}
  
  @media (max-width:768px){
    .hero h2{font-size:2rem}
    .progress-stats{gap:16px}
    .lessons-grid{grid-template-columns:1fr}
  }

  @keyframes celebrate{
    0%,100%{transform:scale(1)}
    50%{transform:scale(1.1)}
  }
  .celebrating{animation:celebrate .5s ease-in-out}
</style>
</head>
<body>

<header>
  <div class="wrap bar">
    <a class="logo" href="/">
      <img src="/assets/ngp-logo.png" alt="NGP Logo" class="logo-img" />
      <h1>NGP</h1>
    </a>
    <nav aria-label="Primary">
      <a href="/tools">Tools</a>
      <a href="/discordservers/">Servers</a>
      <a href="/projects">Projects</a>
      <a href="/docs/">Docs</a>
      <a href="/roblox">Roblox</a>
      <a href="/contact">Contact</a>
      <a href="/login" id="auth-link">Login</a>
    </nav>
  </div>
</header>

<main>
  <div class="wrap">
    
    <div id="login-prompt" class="hidden">
      <div class="hero">
        <h2>Learn FlameScrpt</h2>
        <p>Please log in to track your progress</p>
        <button class="btn" style="margin-top:24px" onclick="window.location.href='/login'">Login to Continue</button>
      </div>
    </div>

    <div id="main-content" class="hidden">
      <div class="hero">
        <h2>Learn FlameScrpt</h2>
        <p>Master the secret language of Flame and Scrpt</p>
      </div>

      <div class="progress-section">
        <div class="progress-card">
          <div class="progress-header">
            <h3 class="progress-title">Your Progress</h3>
            <button class="btn-secondary" onclick="resetProgress()">Reset Progress</button>
          </div>
          <div class="progress-stats">
            <div class="stat">
              <p class="stat-value" id="lessons-completed">0</p>
              <p class="stat-label">Lessons Completed</p>
            </div>
            <div class="stat">
              <p class="stat-value" id="total-lessons">10</p>
              <p class="stat-label">Total Lessons</p>
            </div>
            <div class="stat">
              <p class="stat-value" id="accuracy">0%</p>
              <p class="stat-label">Accuracy</p>
            </div>
          </div>
          <div class="progress-bar-container">
            <div class="progress-bar" id="progress-bar" style="width:0%"></div>
          </div>
        </div>
      </div>

      <div id="lessons-view">
        <h3 style="margin:40px 0 20px; font-size:1.5rem">Lessons</h3>
        <div class="lessons-grid" id="lessons-grid"></div>
      </div>

      <div id="quiz-view" class="hidden">
        <div class="quiz-container">
          <div class="quiz-header">
            <p class="quiz-progress">Question <span id="current-question">1</span> of <span id="total-questions">5</span></p>
            <h3 class="quiz-question" id="question-text"></h3>
            <p class="quiz-instruction" id="question-instruction"></p>
          </div>

          <div id="question-content"></div>

          <div id="feedback-area"></div>

          <div class="quiz-actions">
            <button class="btn-ghost" onclick="exitQuiz()">Exit Lesson</button>
            <button class="btn" id="check-btn" onclick="checkAnswer()">Check</button>
            <button class="btn hidden" id="continue-btn" onclick="nextQuestion()">Continue</button>
          </div>
        </div>
      </div>
    </div>

  </div>
</main>

<footer>
  <div class="wrap">
    <small>¬© <span id="year"></span> NGP ‚Äî Alpha.</small>
  </div>
</footer>

<div id="logout-modal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Logout from NGP Hub?</h3>
    </div>
    <div class="modal-body">
      <p>Are you sure you want to logout?</p>
    </div>
    <div class="modal-footer">
      <button class="btn-ghost" id="cancel-logout-btn">Cancel</button>
      <button class="btn" id="confirm-logout-btn">Logout</button>
    </div>
  </div>
</div>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();
</script>

<script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
  import { getAuth, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
  import { getFirestore, doc, getDoc, setDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

  const firebaseConfig = {
    apiKey: "AIzaSyASMd5kEAscaERvWAT6rYmZSahP2NFW0E0",
    authDomain: "ngp-hub.firebaseapp.com",
    projectId: "ngp-hub",
    storageBucket: "ngp-hub.firebasestorage.app",
    messagingSenderId: "157947384705",
    appId: "1:157947384705:web:c89e95d6d9f7436bb5ce80"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const authLink = document.getElementById('auth-link');
  const logoutModal = document.getElementById('logout-modal');
  const confirmLogoutBtn = document.getElementById('confirm-logout-btn');
  const cancelLogoutBtn = document.getElementById('cancel-logout-btn');

  let currentUser = null;
  let userProgress = {
    completedLessons: [],
    currentLesson: 0,
    totalCorrect: 0,
    totalAnswered: 0
  };

  // FlameScrpt Translation Maps
  const toFlameScrpt = {
    'a':'m','b':'n','c':'o','d':'p','e':'q','f':'r','g':'s','h':'t','i':'u','j':'v','k':'w','l':'x','m':'y','n':'z','o':'—µ','p':'_','q':'-','r':'+','s':'=','t':'[','u':']','v':'{','w':'}','x':'(','y':')','z':'*','.':'&','_':'^','-':'%','+':'$','=':'#','[':'@',']':'!','{':'1','}':'2','(':'3',')':'4','*':'5','&':'6','^':'7','%':'8','$':'9','#':'0','@':'/','!':',','1':'<','2':'>','3':'?','4':'`','5':'~','6':'\\','7':'|','8':';','9':':','0':'a','/':'b',',':'c','<':'d','>':'e','?':'f','`':'g','~':'h','\\':'i','|':'j',';':'k',':':'l'
  };

  const toEnglish = Object.fromEntries(Object.entries(toFlameScrpt).map(([k,v])=>[v,k]));

  const pronunciations = {
    'm':'arccos','n':'barcode','o':'castle','p':'diamond','q':'elephant','r':'fortress','s':'garden','t':'hollow','u':'institutional','v':'jungle','w':'kingdom','x':'lantern','y':'mountain','z':'nebula','—µ':'obelisk','_':'prism','-':'quantum','+':'radiant','=':'stellar','[':'temple',']':'umbrella','{':'valley','}':'willow','(':'xylophone',')':'yellow','*':'zenith'
  };

  function translateToFlameScrpt(text) {
    return text.toLowerCase().split('').map(c => toFlameScrpt[c] || c).join('');
  }

  function translateToEnglish(text) {
    return text.split('').map(c => toEnglish[c] || c).join('');
  }

  function pronounceFlameScrpt(text) {
    return text.split(' ').map(word => {
      return word.split('').map(c => pronunciations[c] || c).join(' ');
    }).join(' Space ');
  }

  // Lesson Definitions
  const lessons = [
    {
      id: 1,
      title: "Alphabet Part 1 (a-e)",
      description: "Learn the first 5 letters",
      questions: [
        {type:'multiple', question:'What is "a" in FlameScrpt?', options:['m','n','o','p'], correct:'m'},
        {type:'multiple', question:'What is "b" in FlameScrpt?', options:['m','n','o','p'], correct:'n'},
        {type:'multiple', question:'What is "c" in FlameScrpt?', options:['m','n','o','p'], correct:'o'},
        {type:'translate', from:'english', text:'a', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:'q', instruction:'Translate to English'}
      ]
    },
    {
      id: 2,
      title: "Alphabet Part 2 (f-j)",
      description: "Learn letters f through j",
      questions: [
        {type:'multiple', question:'What is "f" in FlameScrpt?', options:['r','s','t','u'], correct:'r'},
        {type:'multiple', question:'What is "h" in FlameScrpt?', options:['r','s','t','u'], correct:'t'},
        {type:'translate', from:'english', text:'hi', instruction:'Translate to FlameScrpt (h=t, i=u)'},
        {type:'translate', from:'flamescrpt', text:'v', instruction:'Translate to English'},
        {type:'translate', from:'english', text:'age', instruction:'Translate to FlameScrpt'}
      ]
    },
    {
      id: 3,
      title: "Alphabet Part 3 (k-o)",
      description: "Continue learning the alphabet",
      questions: [
        {type:'multiple', question:'What is "m" in FlameScrpt?', options:['w','x','y','z'], correct:'y'},
        {type:'multiple', question:'What is "n" in FlameScrpt?', options:['w','x','y','z'], correct:'z'},
        {type:'translate', from:'english', text:'no', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:'ymz', instruction:'Translate to English'},
        {type:'translate', from:'english', text:'man', instruction:'Translate to FlameScrpt'}
      ]
    },
    {
      id: 4,
      title: "Simple Words",
      description: "Practice putting letters together",
      questions: [
        {type:'translate', from:'english', text:'hi', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'english', text:'cat', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:'p—µs', instruction:'Translate to English'},
        {type:'translate', from:'english', text:'dog', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:'om[', instruction:'Translate to English'}
      ]
    },
    {
      id: 5,
      title: "Common Words",
      description: "Learn frequently used words",
      questions: [
        {type:'translate', from:'english', text:'yes', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'english', text:'bye', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:')q=', instruction:'Translate to English'},
        {type:'multiple', question:'What is "no" in FlameScrpt?', options:['z—µ',')q=','n—µ[','tu'], correct:'z—µ'},
        {type:'translate', from:'english', text:'lol', instruction:'Translate to FlameScrpt'}
      ]
    },
    {
      id: 6,
      title: "Pronunciation Basics",
      description: "Learn how to speak FlameScrpt",
      questions: [
        {type:'multiple', question:'What word do we say for "m" in FlameScrpt?', options:['arccos','barcode','castle','diamond'], correct:'arccos'},
        {type:'multiple', question:'What word do we say for "t" in FlameScrpt?', options:['hollow','garden','fortress','temple'], correct:'hollow'},
        {type:'pronounce', text:'tu', instruction:'How do you pronounce "tu" in FlameScrpt?'},
        {type:'pronounce', text:'om[', instruction:'How do you pronounce "om[" in FlameScrpt?'},
        {type:'multiple', question:'How do you say spaces when speaking?', options:['space','Space','SPACE','pause'], correct:'Space'}
      ]
    },
    {
      id: 7,
      title: "Spaces & Phrases",
      description: "Master multi-word expressions",
      questions: [
        {type:'translate', from:'english', text:'hi man', instruction:'Translate to FlameScrpt'},
        {type:'pronounce', text:'tu ymz', instruction:'How do you pronounce "tu ymz" in FlameScrpt?'},
        {type:'translate', from:'flamescrpt', text:'nmq zmz', instruction:'Translate to English'},
        {type:'translate', from:'english', text:'see you', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:'s—µ—µp zun', instruction:'Translate to English'}
      ]
    },
    {
      id: 8,
      title: "Emoticons",
      description: "Learn how emoticons work in FlameScrpt",
      questions: [
        {type:'translate', from:'english', text:'bye D:', instruction:'Translate to FlameScrpt (keep emoticon)'},
        {type:'pronounce', text:'nmq D:', instruction:'How do you pronounce "nmq D:" in FlameScrpt?'},
        {type:'multiple', question:'Emoticons in FlameScrpt are...', options:['translated','spoken as-is in English','removed','reversed'], correct:'spoken as-is in English'},
        {type:'translate', from:'english', text:'lol :)', instruction:'Translate to FlameScrpt (keep emoticon)'},
        {type:'translate', from:'flamescrpt', text:'tq))—µ XD', instruction:'Translate to English (keep emoticon)'}
      ]
    },
    {
      id: 9,
      title: "Numbers & Symbols",
      description: "Understand special characters",
      questions: [
        {type:'translate', from:'english', text:'1+1=2', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:'<a9', instruction:'Translate to English'},
        {type:'multiple', question:'What is "5" in FlameScrpt?', options:['~','5','h','*'], correct:'~'},
        {type:'translate', from:'english', text:'100%', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:'>aa&', instruction:'Translate to English'}
      ]
    },
    {
      id: 10,
      title: "Longer Sentences",
      description: "Translate complete sentences",
      questions: [
        {type:'translate', from:'english', text:'how are you', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:'u xy ruzq', instruction:'Translate to English'},
        {type:'pronounce', text:'tq]]—µ ruzq', instruction:'How do you pronounce "tq]]—µ ruzq"?'},
        {type:'translate', from:'english', text:'good night', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:'=qq )—µ] xm[q+', instruction:'Translate to English'}
      ]
    },
    {
      id: 11,
      title: "Mixed Practice",
      description: "Combine all skills",
      questions: [
        {type:'translate', from:'english', text:'hello world', instruction:'Translate to FlameScrpt'},
        {type:'pronounce', text:'s—µ—µp z]z', instruction:'How do you pronounce "s—µ—µp z]z"?'},
        {type:'translate', from:'flamescrpt', text:'[tm{w= r^+', instruction:'Translate to English'},
        {type:'multiple', question:'What is the FlameScrpt word for "code"?', options:['o—µpq','p—µs','ymz','zs_'], correct:'o—µpq'},
        {type:'translate', from:'english', text:'epic win', instruction:'Translate to FlameScrpt'}
      ]
    },
    {
      id: 12,
      title: "Advanced Vocabulary",
      description: "Learn technical terms",
      questions: [
        {type:'translate', from:'english', text:'python', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:'{mxX—µn}q=q+{q', instruction:'Translate to English'},
        {type:'pronounce', text:'ruzq', instruction:'How do you pronounce "ruzq"?'},
        {type:'translate', from:'english', text:'discord', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:'+—µnx—µ(', instruction:'Translate to English'}
      ]
    },
    {
      id: 13,
      title: "Full Conversations",
      description: "Practice realistic dialogue",
      questions: [
        {type:'translate', from:'english', text:'whats up', instruction:'Translate to FlameScrpt'},
        {type:'pronounce', text:'z—µ[ ym] y—µ+q', instruction:'How do you pronounce "z—µ[ ym] y—µ+q"?'},
        {type:'translate', from:'flamescrpt', text:']= yq[q+', instruction:'Translate to English'},
        {type:'translate', from:'english', text:'thanks bro', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:'=qq )—µ] =[y—µ+—µ}', instruction:'Translate to English'}
      ]
    },
    {
      id: 14,
      title: "Master Challenge",
      description: "Final mastery test",
      questions: [
        {type:'translate', from:'english', text:'the quick brown fox', instruction:'Translate to FlameScrpt'},
        {type:'pronounce', text:'[tq xm*) o_[', instruction:'How do you pronounce "[tq xm*) o_["?'},
        {type:'translate', from:'flamescrpt', text:'u x—µ{q r+m', instruction:'Translate to English'},
        {type:'translate', from:'english', text:'game developer', instruction:'Translate to FlameScrpt'},
        {type:'translate', from:'flamescrpt', text:'nq=[ u yq ruz', instruction:'Translate to English'}
      ]
    },
  ];

  window.lessons = lessons;
  window.userProgress = userProgress;
  window.currentUser = currentUser;

  // Load user progress
  async function loadProgress() {
    if (!currentUser) return;
    
    try {
      const docRef = doc(db, 'flamescrpt-progress', currentUser.uid);
      const docSnap = await getDoc(docRef);
      
      if (docSnap.exists()) {
        const data = docSnap.data();
        userProgress = {
          completedLessons: data.completedLessons || [],
          currentLesson: data.currentLesson || 0,
          totalCorrect: data.totalCorrect || 0,
          totalAnswered: data.totalAnswered || 0
        };
        console.log('Progress loaded successfully!', userProgress);
      } else {
        console.log('No saved progress found, starting fresh');
        // Initialize with default values
        userProgress = {
          completedLessons: [],
          currentLesson: 0,
          totalCorrect: 0,
          totalAnswered: 0
        };
      }
    } catch (error) {
      console.error('Error loading progress:', error);
    }
    
    updateProgressDisplay();
    renderLessons();
  }

  // Save user progress
  async function saveProgress() {
    if (!currentUser) return;
    
    try {
      const docRef = doc(db, 'flamescrpt-progress', currentUser.uid);
      await setDoc(docRef, {
        completedLessons: userProgress.completedLessons,
        currentLesson: userProgress.currentLesson,
        totalCorrect: userProgress.totalCorrect,
        totalAnswered: userProgress.totalAnswered,
        lastUpdated: new Date().toISOString()
      }, { merge: true });
      console.log('Progress saved successfully!', userProgress);
    } catch (error) {
      console.error('Error saving progress:', error);
      alert('Failed to save progress. Check console for details.');
    }
  }

  function updateProgressDisplay() {
    const completed = userProgress.completedLessons.length;
    const total = lessons.length;
    const percentage = Math.round((completed / total) * 100);
    const accuracy = userProgress.totalAnswered > 0 
      ? Math.round((userProgress.totalCorrect / userProgress.totalAnswered) * 100)
      : 0;

    document.getElementById('lessons-completed').textContent = completed;
    document.getElementById('total-lessons').textContent = total;
    document.getElementById('accuracy').textContent = accuracy + '%';
    document.getElementById('progress-bar').style.width = percentage + '%';
  }

  function renderLessons() {
    const grid = document.getElementById('lessons-grid');
    grid.innerHTML = '';

    lessons.forEach(lesson => {
      const isCompleted = userProgress.completedLessons.includes(lesson.id);
      const isLocked = lesson.id > 1 && !userProgress.completedLessons.includes(lesson.id - 1);
      
      const card = document.createElement('div');
      card.className = `lesson-card ${isCompleted ? 'completed' : ''} ${isLocked ? 'locked' : ''}`;
      
      if (!isLocked) {
        card.onclick = () => startLesson(lesson.id);
      }

      card.innerHTML = `
        <div class="lesson-header">
          <span class="lesson-number">Lesson ${lesson.id}</span>
          <span class="lesson-status">${isCompleted ? '‚úÖ' : isLocked ? 'üîí' : 'üìù'}</span>
        </div>
        <h4 class="lesson-title">${lesson.title}</h4>
        <p class="lesson-desc">${lesson.description}</p>
      `;

      grid.appendChild(card);
    });
  }

  let currentLesson = null;
  let currentQuestionIndex = 0;
  let userAnswer = '';

  function startLesson(lessonId) {
    currentLesson = lessons.find(l => l.id === lessonId);
    currentQuestionIndex = 0;
    
    document.getElementById('lessons-view').classList.add('hidden');
    document.getElementById('quiz-view').classList.remove('hidden');
    
    showQuestion();
  }

  function showQuestion() {
    const question = currentLesson.questions[currentQuestionIndex];
    const totalQuestions = currentLesson.questions.length;
    
    document.getElementById('current-question').textContent = currentQuestionIndex + 1;
    document.getElementById('total-questions').textContent = totalQuestions;
    document.getElementById('question-instruction').textContent = question.instruction || '';
    document.getElementById('feedback-area').innerHTML = '';
    document.getElementById('check-btn').classList.remove('hidden');
    document.getElementById('continue-btn').classList.add('hidden');

    const contentArea = document.getElementById('question-content');
    contentArea.innerHTML = '';

    // Add alphabet reference toggle for translation questions
    if (question.type === 'translate') {
      const refToggle = document.createElement('button');
      refToggle.className = 'toggle-reference';
      refToggle.textContent = 'üìñ Show Alphabet Reference';
      refToggle.onclick = () => {
        const refCard = document.getElementById('alphabet-reference');
        if (refCard.style.display === 'none') {
          refCard.style.display = 'block';
          refToggle.textContent = 'üìñ Hide Alphabet Reference';
        } else {
          refCard.style.display = 'none';
          refToggle.textContent = 'üìñ Show Alphabet Reference';
        }
      };
      contentArea.appendChild(refToggle);

      // Add the reference card (hidden by default)
      const refCard = document.createElement('div');
      refCard.id = 'alphabet-reference';
      refCard.className = 'reference-card';
      refCard.style.display = 'none';
      refCard.innerHTML = `
        <p class="reference-title">FlameScrpt Alphabet</p>
        <div class="reference-grid">
          <div class="ref-item"><strong>a</strong><span>m</span></div>
          <div class="ref-item"><strong>b</strong><span>n</span></div>
          <div class="ref-item"><strong>c</strong><span>o</span></div>
          <div class="ref-item"><strong>d</strong><span>p</span></div>
          <div class="ref-item"><strong>e</strong><span>q</span></div>
          <div class="ref-item"><strong>f</strong><span>r</span></div>
          <div class="ref-item"><strong>g</strong><span>s</span></div>
          <div class="ref-item"><strong>h</strong><span>t</span></div>
          <div class="ref-item"><strong>i</strong><span>u</span></div>
          <div class="ref-item"><strong>j</strong><span>v</span></div>
          <div class="ref-item"><strong>k</strong><span>w</span></div>
          <div class="ref-item"><strong>l</strong><span>x</span></div>
          <div class="ref-item"><strong>m</strong><span>y</span></div>
          <div class="ref-item"><strong>n</strong><span>z</span></div>
          <div class="ref-item"><strong>o</strong><span>—µ</span></div>
          <div class="ref-item"><strong>p</strong><span>_</span></div>
          <div class="ref-item"><strong>q</strong><span>-</span></div>
          <div class="ref-item"><strong>r</strong><span>+</span></div>
          <div class="ref-item"><strong>s</strong><span>=</span></div>
          <div class="ref-item"><strong>t</strong><span>[</span></div>
          <div class="ref-item"><strong>u</strong><span>]</span></div>
          <div class="ref-item"><strong>v</strong><span>{</span></div>
          <div class="ref-item"><strong>w</strong><span>}</span></div>
          <div class="ref-item"><strong>x</strong><span>(</span></div>
          <div class="ref-item"><strong>y</strong><span>)</span></div>
          <div class="ref-item"><strong>z</strong><span>*</span></div>
        </div>
      `;
      contentArea.appendChild(refCard);
    }

    if (question.type === 'translate') {
      const displayText = question.from === 'english' ? question.text : question.text;
      document.getElementById('question-text').textContent = displayText;
      
      const input = document.createElement('input');
      input.type = 'text';
      input.className = 'answer-input';
      input.placeholder = 'Type your answer...';
      input.id = 'user-input';
      input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') checkAnswer();
      });
      contentArea.appendChild(input);
      setTimeout(() => input.focus(), 100);
      
    } else if (question.type === 'multiple') {
      document.getElementById('question-text').textContent = question.question;
      
      const optionsGrid = document.createElement('div');
      optionsGrid.className = 'options-grid';
      
      question.options.forEach(option => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.textContent = option;
        btn.onclick = () => {
          document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
          btn.classList.add('selected');
          userAnswer = option;
        };
        optionsGrid.appendChild(btn);
      });
      
      contentArea.appendChild(optionsGrid);
      
    } else if (question.type === 'pronounce') {
      document.getElementById('question-text').textContent = question.text;
      
      const refCard = document.createElement('div');
      refCard.className = 'reference-card';
      refCard.innerHTML = `
        <p class="reference-title">Pronunciation Guide</p>
        <div style="background:rgba(255,255,255,.05); padding:16px; border-radius:8px; margin-top:12px">
          <strong style="color:var(--brandB)">Correct:</strong> ${pronounceFlameScrpt(question.text)}
        </div>
      `;
      
      const input = document.createElement('input');
      input.type = 'text';
      input.className = 'answer-input';
      input.placeholder = 'Type the pronunciation...';
      input.id = 'user-input';
      input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') checkAnswer();
      });
      
      contentArea.appendChild(refCard);
      contentArea.appendChild(input);
      setTimeout(() => input.focus(), 100);
    }
  }

  window.checkAnswer = function() {
    const question = currentLesson.questions[currentQuestionIndex];
    let correct = false;
    let correctAnswer = '';

    if (question.type === 'translate') {
      const input = document.getElementById('user-input');
      userAnswer = input.value.trim().toLowerCase();
      
      if (question.from === 'english') {
        correctAnswer = translateToFlameScrpt(question.text);
        correct = userAnswer === correctAnswer;
      } else {
        correctAnswer = translateToEnglish(question.text);
        correct = userAnswer === correctAnswer;
      }
      
    } else if (question.type === 'multiple') {
      correctAnswer = question.correct;
      correct = userAnswer === correctAnswer;
      
      document.querySelectorAll('.option-btn').forEach(btn => {
        if (btn.textContent === correctAnswer) {
          btn.classList.add('correct');
        } else if (btn.textContent === userAnswer && !correct) {
          btn.classList.add('incorrect');
        }
      });
      
    } else if (question.type === 'pronounce') {
      const input = document.getElementById('user-input');
      userAnswer = input.value.trim().toLowerCase();
      correctAnswer = pronounceFlameScrpt(question.text).toLowerCase();
      correct = userAnswer === correctAnswer;
    }

    userProgress.totalAnswered++;
    if (correct) {
      userProgress.totalCorrect++;
    }

    const feedbackArea = document.getElementById('feedback-area');
    const feedback = document.createElement('div');
    feedback.className = `feedback ${correct ? 'correct' : 'incorrect'}`;
    
    if (correct) {
      feedback.innerHTML = '‚úÖ Correct! Nicely done!';
    } else {
      feedback.innerHTML = `‚ùå Not quite. The correct answer is: <strong>${correctAnswer}</strong>`;
    }
    
    feedbackArea.appendChild(feedback);
    
    document.getElementById('check-btn').classList.add('hidden');
    document.getElementById('continue-btn').classList.remove('hidden');
    
    saveProgress();
    updateProgressDisplay();
    
    userAnswer = '';
  };

  window.nextQuestion = function() {
    currentQuestionIndex++;
    
    if (currentQuestionIndex >= currentLesson.questions.length) {
      completeLesson();
    } else {
      showQuestion();
    }
  };

  function completeLesson() {
    if (!userProgress.completedLessons.includes(currentLesson.id)) {
      userProgress.completedLessons.push(currentLesson.id);
      saveProgress();
    }

    const quizContainer = document.querySelector('.quiz-container');
    quizContainer.classList.add('celebrating');
    
    setTimeout(() => {
      quizContainer.classList.remove('celebrating');
      exitQuiz();
    }, 1000);
  }

  window.exitQuiz = function() {
    document.getElementById('quiz-view').classList.add('hidden');
    document.getElementById('lessons-view').classList.remove('hidden');
    currentLesson = null;
    currentQuestionIndex = 0;
    updateProgressDisplay();
    renderLessons();
  };

  window.resetProgress = function() {
    if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
      userProgress = {
        completedLessons: [],
        currentLesson: 0,
        totalCorrect: 0,
        totalAnswered: 0
      };
      saveProgress();
      updateProgressDisplay();
      renderLessons();
    }
  };

  // Auth handling
  onAuthStateChanged(auth, (user) => {
    if (user) {
      currentUser = user;
      window.currentUser = user;
      authLink.textContent = user.email.split('@')[0];
      authLink.href = '#';
      authLink.addEventListener('click', (e) => {
        e.preventDefault();
        logoutModal.classList.add('active');
      });
      
      document.getElementById('login-prompt').classList.add('hidden');
      document.getElementById('main-content').classList.remove('hidden');
      
      loadProgress();
    } else {
      currentUser = null;
      window.currentUser = null;
      authLink.textContent = 'Login';
      authLink.href = '/login';
      
      document.getElementById('login-prompt').classList.remove('hidden');
      document.getElementById('main-content').classList.add('hidden');
    }
  });

  cancelLogoutBtn.addEventListener('click', () => {
    logoutModal.classList.remove('active');
  });

  confirmLogoutBtn.addEventListener('click', async () => {
    await signOut(auth);
    window.location.reload();
  });

  // Make functions globally accessible
  window.translateToFlameScrpt = translateToFlameScrpt;
  window.translateToEnglish = translateToEnglish;
  window.pronounceFlameScrpt = pronounceFlameScrpt;
  window.startLesson = startLesson;
</script>

</body>
</html>
